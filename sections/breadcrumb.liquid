<style>
  .breadcrumb_main { margin: 16px auto; }
  .breadcrumb a { text-decoration: none; }
  .breadcrumb__sep { display:inline-flex; margin: 0 6px; vertical-align: middle; }
  .breadcrumb__current { opacity: .85; }
  .breadcrumb-collection-title { margin: 10px 0 0; font-size: 24px; font-weight: 700; }
</style>

{% if section.settings.show_breadcrumb %} 
  {%- unless template == 'index' -%}
  <div class="page-width breadcrumb_main">

    <nav class="breadcrumb row" aria-label="breadcrumbs">
      <div class="col-12 breadcrumb_colmun">
        <a href="{{ routes.root_url }}" title="{{ 'wbcustomlabel.wballtext.home' | t | default: 'Home' }}">
          {{ 'wbcustomlabel.wballtext.home' | t | default: 'Home' }}
        </a>

        {%- comment -%} PRODUCT {%- endcomment -%}
        {%- if template contains 'product' -%}
          {%- assign current_collection = collection -%}
          {%- if current_collection == nil and product.collections and product.collections.size > 0 -%}
            {%- assign current_collection = product.collections.first -%}
          {%- endif -%}
          <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
          {%- if current_collection -%}
            {{ current_collection.title | link_to: current_collection.url }}
            <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
          {%- endif -%}
          <span class="breadcrumb__current">{{ product.title }}</span>

        {%- comment -%} COLLECTION {%- endcomment -%}
        {%- elsif template contains 'collection' -%}
          <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
          {%- if current_tags -%}
            {{ collection.title | link_to: collection.url }}
            <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
            <span class="breadcrumb__current">{{ current_tags | join: " + " }}</span>
          {%- else -%}
            <span class="breadcrumb__current">{{ collection.title }}</span>
          {%- endif -%}

        {%- comment -%} PAGE {%- endcomment -%}
        {%- elsif template contains 'page' -%}
          <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
          <span class="breadcrumb__current">{{ page.title }}</span>

        {%- comment -%} BLOG LIST {%- endcomment -%}
        {%- elsif template == 'blog' -%}
          <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
          {%- if current_tags -%}
            {{ blog.title | link_to: blog.url }}
            <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
            <span class="breadcrumb__current">{{ current_tags | join: " + " }}</span>
          {%- else -%}
            <span class="breadcrumb__current">{{ blog.title }}</span>
          {%- endif -%}

        {%- comment -%} ARTICLE {%- endcomment -%}
        {%- elsif template == 'article' -%}
          <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
          {{ blog.title | link_to: blog.url }}
          <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
          <span class="breadcrumb__current">{{ article.title }}</span>

        {%- comment -%} SEARCH {%- endcomment -%}
        {%- elsif template contains 'search' -%}
          <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
          {%- assign search_label = 'general.search.search' | t | default: 'Search' -%}
          <span class="breadcrumb__current">
            {{ search_label }}{% if search.terms %}: “{{ search.terms }}”{% endif %}
          </span>

        {%- comment -%} CART {%- endcomment -%}
        {%- elsif template contains 'cart' -%}
          <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
          <span class="breadcrumb__current">{{ 'cart.general.title' | t | default: 'Cart' }}</span>

        {%- comment -%} ACCOUNT / CUSTOMERS {%- endcomment -%}
        {%- elsif template contains 'customers' -%}
          <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
          {%- assign acct = 'customer.account.title' | t | default: 'Account' -%}
          <span class="breadcrumb__current">{{ acct }}</span>

        {%- comment -%} ALL COLLECTIONS LIST {%- endcomment -%}
        {%- elsif template contains 'list-collections' -%}
          <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
          <span class="breadcrumb__current">{{ 'collections.general.all_collections' | t | default: 'Collections' }}</span>

        {%- comment -%} 404 {%- endcomment -%}
        {%- elsif template contains '404' -%}
          <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
          <span class="breadcrumb__current">{{ 'general.404.title' | t | default: 'Page not found' }}</span>

        {%- else -%}
          <span class="breadcrumb__sep" aria-hidden="true">{% render 'icon-arrow-right' %}</span>
          <span class="breadcrumb__current">{{ page_title }}</span>
        {%- endif -%}
      </div>
    </nav>

    {% comment %} {% if template contains 'collection' and collection.handle %}
      <h2 class="breadcrumb-collection-title"><strong>{{ collection.title }}</strong></h2>
    {% endif %} {% endcomment %}

  </div>
  {%- endunless -%}
{% endif %}

{% schema %}
{
  "name": "Breadcrumb",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_breadcrumb",
      "default": true,
      "label": "Show breadcrumb"
    }
  ],
  "presets": [
    {
      "name": "Breadcrumb"
    }
  ]
}
{% endschema %}
